{% extends 'layout/base.html' %}
{% block title %}
    {% if is_update %}Update Your Profile{% else %}Complete Your Profile{% endif %} | Tracc
{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-12 col-sm-10 col-md-6 col-lg-4">
        <h2 class="mb-4 text-center">
            {% if is_update %}
                Update Profile
            {% else %}
                Complete Your Profile
            {% endif %}
        </h2>

        <form method="POST">
            {% csrf_token %}
            <div class="mb-3">
                <label for="gender" class="form-label">Gender</label>
                <select name="gender" id="gender" class="form-select">
                    <option value="" {% if not profile.gender %}selected{% endif %}>Select Gender</option>
                    <option value="M" {% if profile.gender == "M" %}selected{% endif %}>Male</option>
                    <option value="F" {% if profile.gender == "F" %}selected{% endif %}>Female</option>
                    <option value="O" {% if profile.gender == "O" %}selected{% endif %}>Other</option>
                </select>
            </div>
                                            
            <label for="height_cm" class="form-label">Height</label>
            <div class="input-group mb-3">
                <input 
                    type="number" name="height_cm" class="form-control" id="height_cm" 
                    value="{{ profile.height_cm|default:'' }}"  style="width: 70%;" required
                >
                <select class="form-select dropdown-menu-end" id="height-unit">
                    <option value="cm" {% if settings.height_unit == "cm" %}selected{% endif %}>cm</option>
                    <option value="ft" {% if settings.height_unit == "ft" %}selected{% endif %}>ft</option>
                </select>
            </div>

            {% if not is_update %}
            <label for="current_weight" class="form-label">Current Weight</label>
            <div class="input-group mb-3">
                <input 
                    type="number" step="0.1" name="current_weight" class="form-control" id="current_weight"
                    value="{{ profile.current_weight|default:'' }}"  style="width: 70%;" required
                >
                <select class="form-select dropdown-menu-end" id="weight-unit">
                    <option value="kgs" {% if settings.weight_unit == "kgs" %}selected{% endif %}>kgs</option>
                    <option value="lbs" {% if settings.weight_unit == "lbs" %}selected{% endif %}>lbs</option>
                </select>
            </div>
            {% endif %}

            <label for="target_weight" class="form-label">Target Weight</label>
            <div class="input-group mb-3">
                <input 
                    type="number" step="0.1" name="target_weight" class="form-control" id="target_weight" 
                    value="{{ profile.target_weight|default:'' }}" style="width: 70%;" required
                >
                <select class="form-select dropdown-menu-end" id="weight-unit">
                    <option value="kgs" {% if settings.weight_unit == "kgs" %}selected{% endif %}>kgs</option>
                    <option value="lbs" {% if settings.weight_unit == "lbs" %}selected{% endif %}>lbs</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="dob" class="form-label">Date of Birth</label>
                <input type="date" name="dob" class="form-control" id="dob"
                       value="{{ profile.dob|date:'Y-m-d'|default:'' }}">
            </div>

            <button type="submit" class="btn btn-primary w-100">Save & Continue</button>
        </form>
    </div>
</div>
{% endblock %}
